<div class="armas-admin">
  <div class="crud-header">
    <h2>Gesti√≥n de Armas</h2>
    <div class="acciones">
      <input
        type="text"
        placeholder="üîç Buscar arma..."
        [(ngModel)]="searchTerm"
        (keyup)="buscarArmas()"
      />
      <button class="btn-nueva" (click)="abrirModalCrear()">‚ûï Nueva Arma</button>
    </div>
  </div>

  <table class="crud-table" *ngIf="armas.length > 0; else sinArmas">
    <thead>
      <tr>
        <th>ID</th>
        <th>Imagen</th>
        <th>Nombre</th>
        <th>Categor√≠a</th>
        <th>Alcance</th>
        <th>Da√±o</th>
        <th>Precisi√≥n</th>
        <th>Precio</th>
        <th>Acciones</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let arma of armas">
        <td>{{ arma.id }}</td>

        <!-- Imagen -->
        <td>
          <img
            [src]="arma.imagenUrl || '/assets/no-image.png'"
            alt="{{ arma.nombre }}"
            class="arma-img"
          />
        </td>

        <td>{{ arma.nombre }}</td>
        <td>{{ arma.categoria?.nombre || '-' }}</td>
        <td>{{ arma.alcance ?? '-' }}%</td>
        <td>{{ arma.danio ?? '-' }}%</td>
        <td>{{ arma.precision ?? '-' }}%</td>
        <td>{{ arma.precio | currency: 'EUR' }}</td>

        <td>
          <button class="edit" (click)="abrirModalEditar(arma)">‚úèÔ∏è</button>
          <button class="delete" (click)="abrirModalEliminar(arma)">‚ùå</button>
        </td>
      </tr>
    </tbody>
  </table>

  <app-arma-modal
    [visible]="modalVisible"
    [modo]="modalModo"
    [arma]="armaSeleccionada"
    (cerrar)="cerrarModal()"
    (guardar)="guardarArma($event)"
    (confirmarEliminar)="eliminarArmaConfirmada()"
  ></app-arma-modal>

  <ng-template #sinArmas>
    <p class="mensaje-vacio">No hay armas que coincidan con la b√∫squeda.</p>
  </ng-template>
</div>
